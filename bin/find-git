#!/usr/bin/env bash

where="$1"
shift 1
[ "$where" = "" ] && echo "Usage: $0 <base directory> [-print] <command> ..." && exit 1

if [[ "$1" == "-print" ]]
then
  print_option="$1"
  shift 1
else
  print_option=""
fi

[ "$1" = "" ] && echo "Missing command" && exit 2

find "$where" -maxdepth 2 -type d -name '.git' "$print_option" -execdir "$@" \;

